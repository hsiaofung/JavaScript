<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //for
      var o = [1, 2, 3, 4, 5, 6];
      var keys = Object.keys(o); //取得物件o的特性名稱陣列
      var values = []; //將符合的特性值存於此陣列

      for (var i = 0; i < o.length; i++) {
        //對陣列的每個索引
        var key = keys[i]; //取得索引位置的key
        values[i] = o[key]; //將值存於values陣列
      }

      //優化 : 陣列長度只需查用一次，而非每次迭代都要查用。
      for (var i = 0, len = keys.length; i < len; i++) {
        //迴圈主體相同
      }

      var a = [1, 2, 3, 4, 5, 6, , 7, 8, , 9];
      //若陣列是稀疏， 應該在使用前測試有效性。
      for (var i = 0; i < a.length; i++) {
        if (!a[i]) continue; //跳過null、undefined與不存在的元素
        //這裡是迴圈主體
      }

      //如果只想跳過未定義與不存在:
      for (var i = 0; i < a.length; i++) {
        if (a[i] === undefined) continue; //跳過undefined與不存在的元素
        //這裡是迴圈主體
      }

      //如果只想跳過沒有陣列元素存在的索引，但是仍想要處理存在但值為undefined的元素。
      for (var i = 0; i < a.length; i++) {
        if (!(i in a)) continue; //跳過不存在的元素
        //這裡是迴圈主體
      }

      //for/in 迴圈用在稀疏陣列上: 將可列舉的特性名稱指定給迴圈變數，一次一個。不存在的索引不會被迭代。
      var sparseArray = [1, 2, 3, 4, 5, 6, , 7, 8, , 9];
      for (var index in sparseArray) {
        var value = sparseArray[index];
        //現在用索引與值進行想要的處理
      }

      //for/in 迴圈會回傳繼承特性的名稱，所以必須多加一個額外的測試，過濾掉不想要的特性
      for (var i in a) {
        if (!a.hasOwnProperty(i)) continue; //跳過繼承特性
      }

      //另一個寫法
      for (var i in a) {
        //如果i不是非負整數就跳過
        if (String(Math.floor(Math.abs(Number(i)))) !== i) continue;
      }

      //forEach()
      var data = [1, 2, 3, 4, 5]; //這是要進行迭代的陣列
      var sumOfSquares = 0; //我們要計算這些資料平方值的總和

      data.forEach(function (x) {
        //將每個元素傳給此函式
        sumOfSquares += x * x; //加總平方值
      });
      console.log(sumOfSquares);
    </script>
  </body>
</html>
